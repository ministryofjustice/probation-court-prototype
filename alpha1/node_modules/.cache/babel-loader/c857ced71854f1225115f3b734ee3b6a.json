{"ast":null,"code":"import _regeneratorRuntime from \"/Users/katiecawthorne/Documents/prototype/probation-court-prototype/alpha1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/katiecawthorne/Documents/prototype/probation-court-prototype/alpha1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/katiecawthorne/Documents/prototype/probation-court-prototype/alpha1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/katiecawthorne/Documents/prototype/probation-court-prototype/alpha1/src/scenes/calendar/Calendar.js\";\nimport React, { Fragment, useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport moment from 'moment';\nimport { lastMonth as last, nextMonth as next } from '../../utils/DateTools';\nimport CalendarFilter from './components/CalendarFilter';\n\nfunction Calendar(props) {\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      data = _useState2[0],\n      setData = _useState2[1];\n\n  var currentDate = moment();\n\n  if (props.match.params.month && props.match.params.year) {\n    currentDate.set('month', parseInt(props.match.params.month, 10) - 1);\n    currentDate.set('year', props.match.params.year);\n  }\n\n  useEffect(function () {\n    function getData() {\n      return _getData.apply(this, arguments);\n    }\n\n    function _getData() {\n      _getData = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var response, data;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return fetch('http://localhost:8080/api/calendar');\n\n              case 2:\n                response = _context.sent;\n                _context.next = 5;\n                return response.json();\n\n              case 5:\n                data = _context.sent;\n                setData(data);\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n      return _getData.apply(this, arguments);\n    }\n\n    window.scrollTo(0, 0);\n    getData();\n  }, []);\n  var lastMonth = last(currentDate);\n  var nextMonth = next(currentDate);\n\n  function firstDayOfMonth() {\n    return moment(currentDate).startOf('month').format('d');\n  }\n\n  function blanks() {\n    var blanks = [];\n\n    for (var i = 0; i < firstDayOfMonth(); i++) {\n      blanks.push(React.createElement(\"li\", {\n        key: i,\n        className: \"app-calendar--item app-calendar--item_empty\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41\n        },\n        __self: this\n      }, \"\\xA0\"));\n    }\n\n    return blanks;\n  }\n\n  function postBlanks() {\n    return [React.createElement(Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47\n      },\n      __self: this\n    })];\n  }\n\n  function daysInMonth() {\n    var days = [];\n    var today = currentDate.month() === moment().month() ? currentDate.date() : -1;\n    var todayDay = currentDate.format('dd');\n\n    for (var i = 1, day; i <= currentDate.daysInMonth(); i++) {\n      day = moment(currentDate).date(i).format('dd');\n      days.push(React.createElement(\"li\", {\n        key: i,\n        className: \"app-calendar--item \".concat(i === today ? 'app-calendar--item_today' : ''),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"/cases/list/\".concat(moment().date(i).format('D/M/YYYY')),\n        className: \"app-calendar--link\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"app-calendar--item_day \".concat(i === today ? 'app-calendar--item_day_today' : ''),\n        \"aria-hidden\": \"true\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, i), React.createElement(\"div\", {\n        className: \"govuk-visually-hidden\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, moment().date(i).format('dddd, Do MMMM YYYY')), day !== 'Sa' && day !== 'Su' && React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, today !== -1 && i >= today && i <= today + (todayDay === 'Th' || todayDay === 'Fr' ? 4 : 2) && React.createElement(\"div\", {\n        className: \"moj-badge govuk-!-margin-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, Math.ceil(Math.random() * 15) + 10, \" cases\"), (i <= today || today === -1 && currentDate.month() <= moment().month()) && React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"moj-badge moj-badge--red govuk-!-margin-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, Math.ceil(Math.random() * 10), \" adjourned\"), React.createElement(\"div\", {\n        className: \"moj-badge moj-badge--green govuk-!-margin-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, Math.ceil(Math.random() * (i === today ? 1 : 25)) + 10, \" sentenced\"))))));\n    }\n\n    return days;\n  }\n\n  function toggleFilter() {\n    var $filter = document.querySelector('.moj-filter');\n    var $button = document.querySelector('#filter-button');\n\n    if ($filter && $button) {\n      $filter.classList.toggle('moj-hidden');\n      var isOpen = !$filter.classList.contains('moj-hidden');\n      $button.textContent = isOpen ? 'Hide filter' : 'Show filter';\n      $button.setAttribute('aria-expanded', isOpen.toString());\n    }\n  }\n\n  return React.createElement(\"main\", {\n    id: \"main-content\",\n    role: \"main\",\n    className: \"govuk-main-wrapper\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    className: \"govuk-heading-l govuk-!-margin-0\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, \"Calendar\"), React.createElement(\"p\", {\n    className: \"govuk-body-m govuk-!-font-weight-bold\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, currentDate.format('MMMM, YYYY'), \" \", React.createElement(\"span\", {\n    className: \"govuk-hint govuk-!-display-inline-block\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, \"at \", data.court)), React.createElement(\"div\", {\n    className: \"moj-filter-layout\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"moj-filter-layout__filter\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"moj-filter moj-hidden\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"moj-filter__header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"moj-filter__header-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    className: \"govuk-heading-m\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, \"Filter\")), React.createElement(\"div\", {\n    className: \"moj-filter__header-action\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"moj-filter__content\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  }, React.createElement(CalendarFilter, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122\n    },\n    __self: this\n  })))), React.createElement(\"div\", {\n    className: \"moj-filter-layout__content\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  }, React.createElement(\"table\", {\n    className: \"govuk-table app-table\",\n    role: \"presentation\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }, React.createElement(\"tbody\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  }, React.createElement(\"tr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134\n    },\n    __self: this\n  }, React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135\n    },\n    __self: this\n  }, React.createElement(\"ul\", {\n    className: \"moj-pagination__list govuk-!-margin-top-2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136\n    },\n    __self: this\n  }, React.createElement(\"li\", {\n    className: \"moj-pagination__item  moj-pagination__item--prev\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137\n    },\n    __self: this\n  }, React.createElement(Link, {\n    to: \"/calendar/\".concat(lastMonth.month + '/' + lastMonth.year),\n    className: \"govuk-body-s moj-pagination__link\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }, lastMonth.monthName, \", \", lastMonth.year)), React.createElement(\"li\", {\n    className: \"moj-pagination__item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141\n    },\n    __self: this\n  }, \"\\xA0|\\xA0\"), React.createElement(\"li\", {\n    className: \"moj-pagination__item  moj-pagination__item--next\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142\n    },\n    __self: this\n  }, React.createElement(Link, {\n    to: \"/calendar/\".concat(nextMonth.month + '/' + nextMonth.year),\n    className: \"govuk-body-s moj-pagination__link\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143\n    },\n    __self: this\n  }, nextMonth.monthName, \", \", nextMonth.year)))), React.createElement(\"td\", {\n    className: \"app-!-text-align-right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"moj-action-bar\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"moj-menu\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"moj-menu__wrapper\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    \"data-module\": \"govuk-button\",\n    id: \"filter-button\",\n    className: \"moj-menu__item govuk-button govuk-button--secondary govuk-!-margin-bottom-0\",\n    type: \"button\",\n    \"aria-haspopup\": \"true\",\n    \"aria-expanded\": \"false\",\n    onClick: function onClick() {\n      return toggleFilter();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156\n    },\n    __self: this\n  }, \"Show filter\")))))))), React.createElement(\"div\", {\n    className: \"moj-scrollable-pane\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"moj-scrollable-pane__wrapper\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173\n    },\n    __self: this\n  }, React.createElement(\"ul\", {\n    className: \"app-calendar\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175\n    },\n    __self: this\n  }, moment.weekdaysShort().map(function (day, index) {\n    return React.createElement(\"li\", {\n      key: day,\n      className: \"app-calendar--item app-calendar--item_header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"govuk-visually-hidden\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, moment.weekdays(index)), React.createElement(\"abbr\", {\n      title: moment.weekdays(index),\n      \"aria-hidden\": \"true\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, day));\n  }), blanks(), daysInMonth(), postBlanks()), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190\n    },\n    __self: this\n  }, \"\\xA0\"))))));\n}\n\nexport default Calendar;","map":{"version":3,"sources":["/Users/katiecawthorne/Documents/prototype/probation-court-prototype/alpha1/src/scenes/calendar/Calendar.js"],"names":["React","Fragment","useEffect","useState","Link","moment","lastMonth","last","nextMonth","next","CalendarFilter","Calendar","props","data","setData","currentDate","match","params","month","year","set","parseInt","getData","fetch","response","json","window","scrollTo","firstDayOfMonth","startOf","format","blanks","i","push","postBlanks","daysInMonth","days","today","date","todayDay","day","Math","ceil","random","toggleFilter","$filter","document","querySelector","$button","classList","toggle","isOpen","contains","textContent","setAttribute","toString","court","monthName","weekdaysShort","map","index","weekdays"],"mappings":"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","sourcesContent":["import React, { Fragment, useEffect, useState } from 'react'\nimport { Link } from 'react-router-dom'\nimport moment from 'moment'\nimport { lastMonth as last, nextMonth as next } from '../../utils/DateTools'\n\nimport CalendarFilter from './components/CalendarFilter'\n\nfunction Calendar (props) {\n\n  const [data, setData] = useState({})\n  const currentDate = moment()\n\n  if (props.match.params.month && props.match.params.year) {\n    currentDate.set('month', parseInt(props.match.params.month, 10) - 1)\n    currentDate.set('year', props.match.params.year)\n  }\n\n  useEffect(() => {\n    async function getData () {\n      const response = await fetch('http://localhost:8080/api/calendar')\n      const data = await response.json()\n      setData(data)\n    }\n\n    window.scrollTo(0, 0)\n    getData()\n  }, [])\n\n  const lastMonth = last(currentDate)\n  const nextMonth = next(currentDate)\n\n  function firstDayOfMonth () {\n    return moment(currentDate)\n      .startOf('month')\n      .format('d')\n  }\n\n  function blanks () {\n    let blanks = []\n    for (let i = 0; i < firstDayOfMonth(); i++) {\n      blanks.push(<li key={ i } className=\"app-calendar--item app-calendar--item_empty\">&nbsp;</li>)\n    }\n    return blanks\n  }\n\n  function postBlanks() {\n    return [<Fragment />]\n  }\n\n  function daysInMonth () {\n    let days = []\n    const today = currentDate.month() === moment().month() ? currentDate.date() : -1\n    const todayDay = currentDate.format('dd')\n\n    for (let i = 1, day; i <= currentDate.daysInMonth(); i++) {\n      day = moment(currentDate).date(i).format('dd')\n      days.push(\n        <li key={ i } className={ `app-calendar--item ${ i === today ? 'app-calendar--item_today' : '' }` }>\n          <Link to={ `/cases/list/${ moment().date(i).format('D/M/YYYY') }` } className=\"app-calendar--link\">\n            <div className={ `app-calendar--item_day ${ i === today ? 'app-calendar--item_day_today' : '' }` }\n                 aria-hidden=\"true\">{ i }</div>\n            <div className=\"govuk-visually-hidden\">{ moment().date(i).format('dddd, Do MMMM YYYY') }</div>\n            { day !== 'Sa' && day !== 'Su' && (\n              <Fragment>\n                { today !== -1 && i >= today && i <= today + (todayDay === 'Th' || todayDay === 'Fr' ? 4 : 2) && (<div\n                  className=\"moj-badge govuk-!-margin-2\">{ Math.ceil(Math.random() * 15) + 10 } cases</div>) }\n                { (i <= today || (today === -1 && currentDate.month() <= moment().month())) && (\n                  <Fragment>\n                    <div\n                      className=\"moj-badge moj-badge--red govuk-!-margin-2\">{ Math.ceil(Math.random() * 10) } adjourned\n                    </div>\n                    <div\n                      className=\"moj-badge moj-badge--green govuk-!-margin-2\">{ Math.ceil(Math.random() * (i === today ? 1 : 25)) + 10 } sentenced\n                    </div>\n                  </Fragment>\n                ) }\n              </Fragment>\n            ) }\n          </Link>\n        </li>\n      )\n    }\n    return days\n  }\n\n  function toggleFilter () {\n    const $filter = document.querySelector('.moj-filter')\n    const $button = document.querySelector('#filter-button')\n    if ($filter && $button) {\n      $filter.classList.toggle('moj-hidden')\n      const isOpen = !$filter.classList.contains('moj-hidden')\n      $button.textContent = isOpen ? 'Hide filter' : 'Show filter'\n      $button.setAttribute('aria-expanded', isOpen.toString())\n    }\n  }\n\n  return (\n    <main id=\"main-content\" role=\"main\" className=\"govuk-main-wrapper\">\n\n      <h1 className=\"govuk-heading-l govuk-!-margin-0\">Calendar</h1>\n      <p className=\"govuk-body-m govuk-!-font-weight-bold\">{ currentDate.format('MMMM, YYYY') } <span\n        className=\"govuk-hint govuk-!-display-inline-block\">at { data.court }</span></p>\n\n      <div className=\"moj-filter-layout\">\n\n        <div className=\"moj-filter-layout__filter\">\n          <div className=\"moj-filter moj-hidden\">\n            <div className=\"moj-filter__header\">\n\n              <div className=\"moj-filter__header-title\">\n                <h2 className=\"govuk-heading-m\">Filter</h2>\n              </div>\n\n              <div className=\"moj-filter__header-action\">\n\n              </div>\n\n            </div>\n\n            <div className=\"moj-filter__content\">\n\n              <CalendarFilter/>\n\n            </div>\n\n          </div>\n\n        </div>\n\n        <div className=\"moj-filter-layout__content\">\n\n          <table className=\"govuk-table app-table\" role=\"presentation\">\n            <tbody>\n            <tr>\n              <td>\n                <ul className=\"moj-pagination__list govuk-!-margin-top-2\">\n                  <li className=\"moj-pagination__item  moj-pagination__item--prev\">\n                    <Link to={ `/calendar/${ lastMonth.month + '/' + lastMonth.year }` }\n                          className=\"govuk-body-s moj-pagination__link\">{ lastMonth.monthName }, { lastMonth.year }</Link>\n                  </li>\n                  <li className=\"moj-pagination__item\">&nbsp;|&nbsp;</li>\n                  <li className=\"moj-pagination__item  moj-pagination__item--next\">\n                    <Link to={ `/calendar/${ nextMonth.month + '/' + nextMonth.year }` }\n                          className=\"govuk-body-s moj-pagination__link\">{ nextMonth.monthName }, { nextMonth.year }</Link>\n                  </li>\n                </ul>\n\n              </td>\n              <td className=\"app-!-text-align-right\">\n\n                <div className=\"moj-action-bar\">\n\n                  <div className=\"moj-menu\">\n                    <div className=\"moj-menu__wrapper\">\n\n                      <button data-module=\"govuk-button\" id=\"filter-button\"\n                              className=\"moj-menu__item govuk-button govuk-button--secondary govuk-!-margin-bottom-0\"\n                              type=\"button\"\n                              aria-haspopup=\"true\"\n                              aria-expanded=\"false\" onClick={ () => toggleFilter() }>Show filter\n                      </button>\n\n                    </div>\n                  </div>\n\n                </div>\n              </td>\n            </tr>\n            </tbody>\n          </table>\n\n          <div className=\"moj-scrollable-pane\">\n            <div className=\"moj-scrollable-pane__wrapper\">\n\n              <ul className=\"app-calendar\">\n                { moment.weekdaysShort().map((day, index) => {\n                  return (\n                    <li key={ day } className=\"app-calendar--item app-calendar--item_header\">\n                      <span className=\"govuk-visually-hidden\">{ moment.weekdays(index) }</span>\n                      <abbr title={ moment.weekdays(index) } aria-hidden=\"true\">{ day }</abbr>\n                    </li>\n                  )\n                })\n                }\n                { blanks() }\n                { daysInMonth() }\n                { postBlanks() }\n              </ul>\n\n              <p>&nbsp;</p>\n\n            </div>\n          </div>\n        </div>\n      </div>\n\n    </main>\n  )\n}\n\nexport default Calendar"]},"metadata":{},"sourceType":"module"}