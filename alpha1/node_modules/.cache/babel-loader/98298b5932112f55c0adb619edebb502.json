{"ast":null,"code":"import _regeneratorRuntime from \"/Users/katiecawthorne/Documents/prototype/probation-court-prototype/alpha1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/katiecawthorne/Documents/prototype/probation-court-prototype/alpha1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"/Users/katiecawthorne/Documents/prototype/probation-court-prototype/alpha1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/Users/katiecawthorne/Documents/prototype/probation-court-prototype/alpha1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/katiecawthorne/Documents/prototype/probation-court-prototype/alpha1/src/scenes/cases/scenes/match-case-list/MatchCaseList.js\";\nimport React, { Fragment, useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport moment from 'moment';\nimport { useStateValue } from '../../../../utils/StateProvider';\n\nfunction MatchCaseList() {\n  var _useState = useState({\n    courtName: '',\n    unmatched: []\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      data = _useState2[0],\n      setData = _useState2[1];\n\n  var _useStateValue = useStateValue(),\n      _useStateValue2 = _slicedToArray(_useStateValue, 2),\n      currentDate = _useStateValue2[0].currentDate,\n      dispatch = _useStateValue2[1];\n\n  useEffect(function () {\n    function fixNameCase($name) {\n      return $name.toLowerCase().replace('miss ', '').replace('mrs ', '').replace('mr ', '').split(' ').map(function (item) {\n        return item.charAt(0).toUpperCase() + item.slice(1);\n      }).join(' ');\n    }\n\n    function configureData($data) {\n      var unmatched = [];\n      $data.sessions.forEach(function ($session) {\n        $session.blocks.forEach(function ($block) {\n          $block.cases.forEach(function ($case) {\n            $case = _objectSpread({}, $case, {\n              courtRoom: parseInt($session.courtRoom, 10),\n              startTime: $block.startTime,\n              endTime: $block.endTime,\n              noMatch: $case.defendant.deliusStatus === 'NO_MATCH'\n            });\n            $case.defendant = _objectSpread({}, $case.defendant, {\n              name: fixNameCase($case.defendant.name)\n            });\n\n            if ($case.noMatch) {\n              unmatched.push($case);\n            }\n          });\n        });\n      });\n      setData({\n        courtName: $data.courtName,\n        unmatched: unmatched\n      });\n    }\n\n    function getData() {\n      return _getData.apply(this, arguments);\n    }\n\n    function _getData() {\n      _getData = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var response, data;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return fetch('http://localhost:8080/api/bigcaselist');\n\n              case 2:\n                response = _context.sent;\n                _context.next = 5;\n                return response.json();\n\n              case 5:\n                data = _context.sent;\n                configureData(data);\n                dispatch({\n                  type: 'setCourt',\n                  setCourt: data.courtName\n                });\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n      return _getData.apply(this, arguments);\n    }\n\n    window.scrollTo(0, 0);\n    getData();\n  }, [dispatch]);\n  return React.createElement(Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"govuk-breadcrumbs\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, React.createElement(\"ol\", {\n    className: \"govuk-breadcrumbs__list\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, React.createElement(\"li\", {\n    className: \"govuk-breadcrumbs__list-item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, React.createElement(Link, {\n    to: \"/cases/list\",\n    className: \"govuk-breadcrumbs__link\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, \"Cases\")), React.createElement(\"li\", {\n    className: \"govuk-breadcrumbs__list-item\",\n    \"aria-current\": \"page\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, \"Unmatched cases\"))), React.createElement(\"main\", {\n    id: \"main-content\",\n    role: \"main\",\n    className: \"govuk-main-wrapper govuk-!-margin-top-0 govuk-!-padding-top-0\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    className: \"govuk-heading-l govuk-!-margin-0\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, \"Match cases\", React.createElement(\"span\", {\n    className: \"govuk-hint govuk-!-display-inline-block govuk-!-margin-0\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, \"\\xA0to offender records in Delius\")), React.createElement(\"p\", {\n    className: \"govuk-body-m govuk-!-font-weight-bold\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, currentDate.format('dddd, Do MMMM YYYY'), React.createElement(\"span\", {\n    className: \"govuk-hint govuk-!-display-inline-block\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, \"\\xA0at \", data.courtName)), data.unmatched && data.unmatched.length && React.createElement(Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"govuk-body govuk-!-margin-0\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, \"The below defendants have not been successfully matched with offender records in Delius.\"), React.createElement(\"p\", {\n    className: \"govuk-body\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, \"Please action each to find the correct offender record within Delius or to confirm that the defendant is not currently known to Probation.\"), React.createElement(\"table\", {\n    className: \"govuk-table app-table app-table--split-rows govuk-!-margin-bottom-0\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, React.createElement(\"thead\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, React.createElement(\"tr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, React.createElement(\"th\", {\n    scope: \"col\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, \"Name\"), React.createElement(\"th\", {\n    scope: \"col\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, \"Offence\"), React.createElement(\"th\", {\n    scope: \"col\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, \"Delius record\"), React.createElement(\"th\", {\n    scope: \"col\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, \"Status\"), React.createElement(\"th\", {\n    scope: \"col\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, \"Sitting\"), React.createElement(\"th\", {\n    scope: \"col\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, \"Court\"))), React.createElement(\"tbody\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, data.unmatched && data.unmatched.map(function ($case, index) {\n    return React.createElement(\"tr\", {\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      scope: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/cases/match/\".concat($case.id),\n      onClick: function onClick() {\n        dispatch({\n          type: 'setCase',\n          setCase: $case\n        });\n      },\n      className: \"govuk-link govuk-link--no-visited-state\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, $case.defendant.name)), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, React.createElement(\"ol\", {\n      className: \"govuk-list\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, $case.offences.map(function (offence, offenceIndex) {\n      return React.createElement(\"li\", {\n        key: offenceIndex,\n        className: \"govuk-list--number app-offence-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, offence.title);\n    }))), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, \"Not identified\"), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, $case.listingNumber === '2st' ? '2nd' : $case.listingNumber, \" listing\"), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, moment($case.startTime, 'HH:mm:ss').format('HH:mm'), \" - \", moment($case.endTime, 'HH:mm:ss').format('HH:mm')), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, $case.courtRoom));\n  }))))));\n}\n\nexport default MatchCaseList;","map":{"version":3,"sources":["/Users/katiecawthorne/Documents/prototype/probation-court-prototype/alpha1/src/scenes/cases/scenes/match-case-list/MatchCaseList.js"],"names":["React","Fragment","useEffect","useState","Link","moment","useStateValue","MatchCaseList","courtName","unmatched","data","setData","currentDate","dispatch","fixNameCase","$name","toLowerCase","replace","split","map","item","charAt","toUpperCase","slice","join","configureData","$data","sessions","forEach","$session","blocks","$block","cases","$case","courtRoom","parseInt","startTime","endTime","noMatch","defendant","deliusStatus","name","push","getData","fetch","response","json","type","setCourt","window","scrollTo","format","length","index","id","setCase","offences","offence","offenceIndex","title","listingNumber"],"mappings":"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","sourcesContent":["import React, { Fragment, useEffect, useState } from 'react'\nimport { Link } from 'react-router-dom'\nimport moment from 'moment'\n\nimport { useStateValue } from '../../../../utils/StateProvider'\n\nfunction MatchCaseList () {\n\n  const [data, setData] = useState({ courtName: '', unmatched: [] })\n  const [{ currentDate }, dispatch] = useStateValue()\n\n  useEffect(() => {\n\n    function fixNameCase ($name) {\n      return $name.toLowerCase().replace('miss ', '').replace('mrs ', '').replace('mr ', '').split(' ').map(item => { return item.charAt(0).toUpperCase() + item.slice(1) }).join(' ')\n    }\n\n    function configureData ($data) {\n      let unmatched = []\n      $data.sessions.forEach($session => {\n        $session.blocks.forEach($block => {\n          $block.cases.forEach($case => {\n\n            $case = {\n              ...$case,\n              courtRoom: parseInt($session.courtRoom, 10),\n              startTime: $block.startTime,\n              endTime: $block.endTime,\n              noMatch: $case.defendant.deliusStatus === 'NO_MATCH'\n            }\n\n            $case.defendant = { ...$case.defendant, name: fixNameCase($case.defendant.name) }\n\n            if ($case.noMatch) {\n              unmatched.push($case)\n            }\n          })\n        })\n      })\n      setData({ courtName: $data.courtName, unmatched: unmatched })\n    }\n\n    async function getData () {\n      const response = await fetch('http://localhost:8080/api/bigcaselist')\n      const data = await response.json()\n      configureData(data)\n      dispatch({ type: 'setCourt', setCourt: data.courtName })\n    }\n\n    window.scrollTo(0, 0)\n    getData()\n  }, [dispatch])\n\n  return (\n    <Fragment>\n\n      <div className=\"govuk-breadcrumbs\">\n        <ol className=\"govuk-breadcrumbs__list\">\n          <li className=\"govuk-breadcrumbs__list-item\">\n            <Link to=\"/cases/list\" className=\"govuk-breadcrumbs__link\">Cases</Link>\n          </li>\n          <li className=\"govuk-breadcrumbs__list-item\" aria-current=\"page\">Unmatched cases</li>\n        </ol>\n      </div>\n\n      <main id=\"main-content\" role=\"main\" className=\"govuk-main-wrapper govuk-!-margin-top-0 govuk-!-padding-top-0\">\n\n        <h2 className=\"govuk-heading-l govuk-!-margin-0\">Match cases<span\n          className=\"govuk-hint govuk-!-display-inline-block govuk-!-margin-0\">&nbsp;to offender records in Delius</span>\n        </h2>\n        <p className=\"govuk-body-m govuk-!-font-weight-bold\">{ currentDate.format('dddd, Do MMMM YYYY') }\n          <span className=\"govuk-hint govuk-!-display-inline-block\">&nbsp;at { data.courtName }</span></p>\n\n        { data.unmatched && data.unmatched.length && (\n          <Fragment>\n\n            <p className=\"govuk-body govuk-!-margin-0\">The below defendants have not been successfully matched with offender records in\n              Delius.</p>\n\n            <p className=\"govuk-body\">Please action each to find the correct offender record within Delius or to confirm that\n              the defendant is not currently known to Probation.</p>\n\n            <table className=\"govuk-table app-table app-table--split-rows govuk-!-margin-bottom-0\">\n              <thead>\n              <tr>\n                <th scope=\"col\">Name</th>\n                <th scope=\"col\">Offence</th>\n                <th scope=\"col\">Delius record</th>\n                <th scope=\"col\">Status</th>\n                <th scope=\"col\">Sitting</th>\n                <th scope=\"col\">Court</th>\n              </tr>\n              </thead>\n              <tbody>\n\n              { data.unmatched && data.unmatched.map(($case, index) => {\n                return (\n                  <tr key={ index }>\n                    <th scope=\"row\"><Link\n                      to={ `/cases/match/${ $case.id }` }\n                      onClick={ () => {\n                        dispatch({ type: 'setCase', setCase: $case })\n                      } }\n                      className=\"govuk-link govuk-link--no-visited-state\">{ $case.defendant.name }</Link>\n                    </th>\n                    <td>\n                      <ol className=\"govuk-list\">\n                        { $case.offences.map((offence, offenceIndex) => {\n                          return <li key={ offenceIndex }\n                                     className=\"govuk-list--number app-offence-title\">{ offence.title }</li>\n                        }) }\n                      </ol>\n                    </td>\n                    <td>Not identified</td>\n                    <td>{ $case.listingNumber === '2st' ? '2nd' : $case.listingNumber } listing</td>\n                    <td>{ moment($case.startTime, 'HH:mm:ss').format('HH:mm') } - { moment($case.endTime, 'HH:mm:ss').format('HH:mm') }</td>\n                    <td>{ $case.courtRoom }</td>\n                  </tr>\n                )\n              }) }\n\n              </tbody>\n            </table>\n\n          </Fragment>\n        ) }\n\n      </main>\n    </Fragment>\n  )\n}\n\nexport default MatchCaseList\n"]},"metadata":{},"sourceType":"module"}